:root {
  --tk-text: black;
  --code-block-text: #d1d5db;
  --tk-bg-color: #ffffff;
  --tk-input-bg: #f5f5f5;
  --tk-border-color: rgba(144, 147, 153, 0.31);
  --tk-comment-bg: transparent;
}

html.dark {
  --tk-text: #d1d5db;
  --tk-bg-color: #1a1a1a;
  --tk-input-bg: #2d2d2d;
  --tk-border-color: rgba(255, 255, 255, 0.1);
  --tk-comment-bg: #252525;
}

.tk-comments {
  @apply text-[var(--tk-text)];
}

.tk-submit {
  .tk-avatar {
    @apply hidden;
  }
}

/* Text Area */
.tk-row {
  .tk-col {
    @apply flex-col-reverse;
    .tk-input {
      textarea {
        @apply rounded-lg py-4 px-6 !min-h-[150px] focus:border-[var(--primary)];
        background-color: var(--tk-input-bg);
        color: var(--tk-text);
      }
    }
  }
}

/* Meta */
.tk-meta-input {
  @apply relative mt-3;
  div {
    @apply min-h-10;
    .el-input-group__prepend {
      @apply !bg-inherit rounded-l-lg;
      min-height: inherit;
      color: var(--tk-text);
    }
    input {
      @apply px-4 rounded-r-lg focus:!border-[var(--primary)];
      min-height: inherit;
      background-color: var(--tk-input-bg);
      color: var(--tk-text);
    }
  }
}

/* Button */
.tk-row.actions {
  @apply w-full !ml-0 !mt-0;
  .__markdown {
    @apply !hidden;
  }
  .tk-preview,
  .tk-send,
  .tk-cancel {
    @apply border-none rounded-lg px-3 py-0 h-8
       bg-[var(--primary)] hover:opacity-90
      text-white;
  }
  .tk-preview {
    @apply bg-[var(--btn-regular-bg)] text-[var(--btn-content)] hover:bg-[var(--btn-regular-bg-hover)];
  }
}

/* Comment title */
.tk-comments-title {
  @apply text-[var(--tk-text)];
  .__comments svg {
    @apply fill-[var(--primary)];
  }
}

.tk-comment {
  @apply border-[1px] p-4 rounded-2xl;
  border-color: var(--tk-border-color);
  background-color: var(--tk-comment-bg);
  .tk-action-icon svg {
    @apply fill-[var(--primary)];
  }
}

.tk-action {
  .tk-action-count {
    @apply text-[var(--btn-content)];
  }
}

.tk-meta {
  .tk-tag {
    @apply border-none rounded-lg text-[var(--btn-content)];
  }

  .tk-tag-green {
    @apply bg-[var(--btn-regular-bg)] dark:bg-[var(--primary)] dark:text-[var(--deep-text)];
  }
}

/* Content & Preview */
.tk-content,
.tk-preview-container {
  color: var(--tk-text);

  img {
    @apply inline !align-bottom;
  }

  a {
    @apply cursor-pointer hover:underline text-[var(--primary)] font-medium;
  }

  .tk-ruser {
    @apply no-underline;
  }

  code:not(pre code) {
    @apply rounded-md px-1 py-0.5 font-semibold;
    background-color: var(--tk-input-bg);
    color: var(--tk-text);
  }

  ul > li::marker {
    content: '•';
    color: var(--primary);
  }

  ol > li::marker {
    color: var(--primary);
  }

  p {
    margin: 0.5em 0;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 0.75em 0 0.5em 0;
    font-weight: 600;
    color: var(--tk-text);
  }

  blockquote {
    margin: 0.5em 0;
    padding-left: 1em;
    border-left: 4px solid var(--tk-border-color);
    color: var(--tk-text);
    opacity: 0.9;
  }

  table {
    border-collapse: collapse;
    margin: 1em 0;
    width: 100%;
  }

  th,
  td {
    border: 1px solid var(--tk-border-color);
    padding: 0.5em;
  }

  th {
    background-color: var(--tk-input-bg);
    font-weight: 600;
    color: var(--tk-text);
  }
}

/* Replies */
.tk-replies {
  .tk-comment {
    background-color: var(--tk-comment-bg);
    .tk-content {
      > span:first-of-type {
        @apply text-xs;
      }
    }
  }
}

/* Code block */
.twikoo .code-block {
  pre {
    @apply !rounded-xl;
  }

  pre:not([class]) {
    @apply bg-[#2d2d2d] overflow-auto p-2 text-[var(--code-block-text)];
  }

  .copy-btn-icon {
    width: inherit !important;
    height: inherit !important;
  }
}

.tk-expand-wrap .tk-expand,
.tk-collapse-wrap .tk-expand {
  @apply hover:rounded-lg mt-1 hover:bg-[var(--btn-plain-bg-hover)];
  color: var(--tk-text);
}

/* Emoji 组件显示修复 */
.card-base {
  overflow: visible;
}

/* 深色模式额外适配 */
html.dark {
  .tk-input {
    background-color: var(--tk-input-bg);
  }

  .tk-preview-container {
    background-color: var(--tk-input-bg);
  }

  .tk-nick {
    color: var(--tk-text);
  }

  .tk-time {
    color: var(--tk-text);
    opacity: 0.6;
  }

  .el-input__inner {
    background-color: var(--tk-input-bg);
    color: var(--tk-text);
  }

  .el-input-group__prepend {
    background-color: var(--tk-input-bg);
    color: var(--tk-text);
    border-color: var(--tk-border-color);
  }

  .el-input__wrapper {
    background-color: var(--tk-input-bg);
    box-shadow: 0 0 0 1px var(--tk-border-color);
  }
}
